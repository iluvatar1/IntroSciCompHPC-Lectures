
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>13. Introduction to High Performance Computing &#8212; Introduction to Scientific and High Performance Computing</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles.css?v=03b9d5b1" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '12-IntroHPC/ParallelProgramming-Intro';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="14. HPC resource manager: Slurm" href="../12-Slurm/Slurm.html" />
    <link rel="prev" title="12. Computational linear algebra: Performance exploration" href="../11-matrix-performance/11-matrix-performance.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Nanoscience_High-Performance_Computing_Facility.jpg/1600px-Nanoscience_High-Performance_Computing_Facility.jpg" class="logo__image only-light" alt="Introduction to Scientific and High Performance Computing - Home"/>
    <script>document.write(`<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Nanoscience_High-Performance_Computing_Facility.jpg/1600px-Nanoscience_High-Performance_Computing_Facility.jpg" class="logo__image only-dark" alt="Introduction to Scientific and High Performance Computing - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Introduction to Scientific and High Performance Computing
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to scientific computing and programming tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/01-Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-Introduction/CPPReview.html">2. Very short review for c++ programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-errorsfpnumbers/ErrorsFPNumbers.html">3. Errors in Floating Point Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-Makefiles/04-Makefiles.html">4. Makefiles as automation tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-stdlib-randomnumbers/06-stdlib-randomnumbers.html">5. Standard library of functions: math functions, containers and random numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-Install-Programs-From-Source/07-Install-Programs-From-Source.html">6. Using software in a hpc environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-Debugging/09-Debugging.html">7. Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09-UnitTest/09-UnitTesting.html">8. Unit Testing : Making sure your bugs don’t come back</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10-RunMultiplePrograms/FarmTask.html">9. Simple parallelization: farm task and gnu parallel or xargs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">High Performance Computing and Parallel Programming</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../10-optimization/10-optimization.html">10. Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10-profiling/10-profiling.html">11. Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11-matrix-performance/11-matrix-performance.html">12. Computational linear algebra: Performance exploration</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">13. Introduction to High Performance Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12-Slurm/Slurm.html">14. HPC resource manager: Slurm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13-OpenMP/OpenMP-Intro.html">15. Introduction to OpenMp (Shared memory)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14-MPI/MPI-Intro.html">16. Introduction to MPI (distributed memory)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15-Intro-Cuda/cuda.html">17. Ref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16-Extra/ExtraToolsForDevelopment.html">18. Some extra tools for development</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../A-01-Git/VersionControlGit.html">19. Git introduction</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/iluvatar1/IntroSciCompHPC-Lectures/master?urlpath=lab/tree/12-IntroHPC/ParallelProgramming-Intro.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/iluvatar1/IntroSciCompHPC-Lectures/blob/master/github/iluvatar1/IntroSciCompHPC-Lectures/blob/master/12-IntroHPC/ParallelProgramming-Intro.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/iluvatar1/IntroSciCompHPC-Lectures" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/iluvatar1/IntroSciCompHPC-Lectures/issues/new?title=Issue%20on%20page%20%2F12-IntroHPC/ParallelProgramming-Intro.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/12-IntroHPC/ParallelProgramming-Intro.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introduction to High Performance Computing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">13.1. Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basics-of-parallel-metrics">13.2. Basics of parallel metrics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practical-overview-of-a-cluster-resources-and-use">13.3. Practical overview of a cluster resources and use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openmp-shared-memory">13.4. Openmp, shared memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">13.4.1. Exercises</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mpi-distributed-memory">13.5. MPI, distributed memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">13.5.1. Exercises</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-in-python">13.6. Parallelism in python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#threads-from-c-11">13.7. Threads from c++11</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">13.7.1. Exercise</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-algorithms-in-c">13.8. Parallel algorithms in c++</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gpu-programming">13.9. Gpu Programming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cuda-nvidia">13.9.1. CUDA: Nvidia</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#amd-rocm">13.9.2. AMD: Rocm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#others">13.9.3. Others</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="introduction-to-high-performance-computing">
<h1><span class="section-number">13. </span>Introduction to High Performance Computing<a class="headerlink" href="#introduction-to-high-performance-computing" title="Link to this heading">#</a></h1>
<p><strong>Courses</strong></p>
<ul class="simple">
<li><p>High-Performance Computing Technologies Course: <a class="reference external" href="https://www.hpc.temple.edu/mhpc/hpc-technology/">https://www.hpc.temple.edu/mhpc/hpc-technology/</a></p></li>
<li><p>What to do aout parallel prograaming: <a class="reference external" href="https://news.ycombinator.com/item?id=36318280">https://news.ycombinator.com/item?id=36318280</a></p></li>
<li><p><a class="reference external" href="https://epcced.github.io/hpc-intro/">https://epcced.github.io/hpc-intro/</a></p></li>
<li><p><a class="reference external" href="https://www.ipht.fr/Pisp/gregoire.misguich/pp.php">https://www.ipht.fr/Pisp/gregoire.misguich/pp.php</a></p></li>
<li><p><a class="reference external" href="https://hpc.llnl.gov/documentation/tutorials">https://hpc.llnl.gov/documentation/tutorials</a></p></li>
</ul>
<p><strong>Resources</strong></p>
<ul class="simple">
<li><p><a class="github reference external" href="https://github.com/trevor-vincent/awesome-high-performance-computing">trevor-vincent/awesome-high-performance-computing</a></p></li>
<li><p><a class="reference external" href="https://viralinstruction.com/posts/hardware/">https://viralinstruction.com/posts/hardware/</a></p></li>
<li><p><a class="reference external" href="https://www.archer.ac.uk/training/online/index.php#IntroHPC">https://www.archer.ac.uk/training/online/index.php#IntroHPC</a></p></li>
<li><p><a class="reference external" href="https://www.archer.ac.uk/training/courses/index.php#hands_on_intro">https://www.archer.ac.uk/training/courses/index.php#hands_on_intro</a></p></li>
<li><p><a class="reference external" href="https://www.archer.ac.uk/training/online/driving_test.php">https://www.archer.ac.uk/training/online/driving_test.php</a></p></li>
<li><p>https://www.sdsc.edu/services/service_rates_summary.html</p></li>
</ul>
<p><strong>Containers in HPC</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=PwI0tJHJOlo">https://www.youtube.com/watch?v=PwI0tJHJOlo</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=WQTrA4-9ZXk">https://www.youtube.com/watch?v=WQTrA4-9ZXk</a></p></li>
<li><p><a class="reference external" href="https://apptainer.org/docs/user/main/index.html">https://apptainer.org/docs/user/main/index.html</a></p></li>
<li><p>https://apptainer.org/docs/user/main/docker_and_oci.html</p></li>
</ul>
<p><strong>Debuggers</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.cs.uoregon.edu/research/tau/home.php">http://www.cs.uoregon.edu/research/tau/home.php</a></p></li>
<li><p><a class="reference external" href="https://vampir.eu/">https://vampir.eu/</a></p></li>
</ul>
<p><strong>EPCC PRACE Training</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.archer2.ac.uk/training/#upcoming-training">https://www.archer2.ac.uk/training/#upcoming-training</a></p></li>
<li><p><a class="reference external" href="https://www.archer2.ac.uk/training/courses/211202-package-users/#materials">https://www.archer2.ac.uk/training/courses/211202-package-users/#materials</a></p></li>
<li><p><a class="reference external" href="https://www.quia.com/quiz/8151816.html">https://www.quia.com/quiz/8151816.html</a></p></li>
<li><p><a class="reference external" href="https://www.archer2.ac.uk/training/courses/210000-openmp-self-service/">https://www.archer2.ac.uk/training/courses/210000-openmp-self-service/</a></p></li>
<li><p><a class="reference external" href="https://www.archer2.ac.uk/training/courses/210000-mpi-self-service/">https://www.archer2.ac.uk/training/courses/210000-mpi-self-service/</a></p></li>
<li><p><a class="reference external" href="https://www.archer2.ac.uk/training/materials/">https://www.archer2.ac.uk/training/materials/</a></p></li>
<li><p>Youtube video list: <a class="reference external" href="https://www.youtube.com/watch?v=_h55hwpLwoE&amp;amp;list=PLD0xgZGaUd1IV8VgXb1ggOLkEv19JmZiP">https://www.youtube.com/watch?v=_h55hwpLwoE&amp;list=PLD0xgZGaUd1IV8VgXb1ggOLkEv19JmZiP</a></p></li>
</ul>
<p>Reference Materials
See presentations <code class="docutils literal notranslate"><span class="pre">hpc-intro.pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">07-HPC-Distributed.pdf</span></code> and
<code class="docutils literal notranslate"><span class="pre">07-Parallel-general-metrics.pdf</span></code> . Special care to metrics.</p>
<section id="introduction">
<h2><span class="section-number">13.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>There is a point where a serial version of our code is not the most
optimal way to exploit our computational resources (but it might be in
the case of embarrassingly parallel problems where you can just run
several programs at once). For instance, you might want to use all the
cores on your multicore system, ideally reducing the execution time, or
you need to explore larger system sizes that could consume a lot of
memory or need too much time.</p>
<p>Typically, <a class="reference external" href="https://en.wikipedia.org/wiki/Moore%27s_law?useskin=vector">Moore’s
law</a> allowed
to wait for a bit in order to get a better machine so your algorithms
will run faster.</p>
<p><a class="reference external" href="https://ourworldindata.org/uploads/2020/11/Transistor-Count-over-time.png">https://ourworldindata.org/uploads/2020/11/Transistor-Count-over-time.png</a></p>
<p>But due to physics limitation and power considerations, it is now
typical to have
<a class="reference external" href="https://en.wikipedia.org/wiki/Multi-core_processor?useskin=vector">multicore</a>
systems</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=Qlv5pB6u534">https://www.youtube.com/watch?v=Qlv5pB6u534</a> (The physics ending moore laws)</p>
<p><a class="reference external" href="https://i.stack.imgur.com/fRJgk.png">https://i.stack.imgur.com/fRJgk.png</a></p>
<p>Recently, power considerations are being more and more relevant:</p>
<ul>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Performance_per_watt?useskin=vector">https://en.wikipedia.org/wiki/Performance_per_watt?useskin=vector</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Koomey%27s_law?useskin=vector">https://en.wikipedia.org/wiki/Koomey’s_law?useskin=vector</a></p></li>
<li><p><a class="reference external" href="https://www.apple.com/newsroom/2022/03/apple-unveils-m1-ultra-the-worlds-most-powerful-chip-for-a-personal-computer/">https://www.apple.com/newsroom/2022/03/apple-unveils-m1-ultra-the-worlds-most-powerful-chip-for-a-personal-computer/</a></p></li>
<li><p><a class="reference external" href="https://www.extremetech.com/extreme/328541-the-apple-m1-pro-and-m1-maxs-power-efficiency-should-rattle-intel-amd">https://www.extremetech.com/extreme/328541-the-apple-m1-pro-and-m1-maxs-power-efficiency-should-rattle-intel-amd</a>)</p>
<p><a class="reference external" href="https://i.extremetech.com/imagery/content-types/07CyoCCWMzGjurj8zpuiYO4/images-2.jpg">https://i.extremetech.com/imagery/content-types/07CyoCCWMzGjurj8zpuiYO4/images-2.jpg</a></p>
</li>
</ul>
<p>At the same time, the computational problems size and/or complexity has
been steadily increasing in time, requiring <a class="reference external" href="https://en.wikipedia.org/wiki/Distributed_computing?useskin=vector">distributed
computing</a>
techniques.</p>
<p><a class="reference external" href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Distributed-parallel.svg/600px-Distributed-parallel.svg.png">https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Distributed-parallel.svg/600px-Distributed-parallel.svg.png</a></p>
<p>(see also
<a class="reference external" href="https://en.wikipedia.org/wiki/Flynn%27s_taxonomy?useskin=vector">https://en.wikipedia.org/wiki/Flynn’s_taxonomy?useskin=vector</a>).
Recently, besides CPU parallelization, the GPU parallelization has
become very relevant (see
<a class="reference external" href="https://en.wikipedia.org/wiki/General-purpose_computing_on_graphics_processing_units?useskin=vector">https://en.wikipedia.org/wiki/General-purpose_computing_on_graphics_processing_units?useskin=vector</a>
), where <a class="reference external" href="https://en.wikipedia.org/wiki/CUDA?useskin=vector">CUDA</a> ,
<a class="reference external" href="https://en.wikipedia.org/wiki/OpenACC?useskin=vector">OpenACC</a>, and
others, are the relevant technologies.</p>
<p>In our case, we will be more focused on the <a class="reference external" href="https://en.wikipedia.org/w/index.php?title=Computer_cluster&amp;amp;useskin=vector">cluster
computing</a>
aspect, while there are more
<a class="reference external" href="https://en.wikipedia.org/wiki/High-performance_computing?useskin=vector">HPC</a>
approaches, like <a class="reference external" href="https://en.wikipedia.org/wiki/Grid_computing?useskin=vector">grid
computing</a>,
<a class="reference external" href="https://en.wikipedia.org/wiki/Cloud_computing?useskin=vector">cloud
computing</a>,
and so on. One of the goals of
<a class="reference external" href="https://en.wikipedia.org/wiki/High-performance_computing?useskin=vector">HPC</a>
is to get better results faster and/or to exploit better current or
future resources.</p>
<p><a class="reference external" href="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/IBM_Blue_Gene_P_supercomputer.jpg/600px-IBM_Blue_Gene_P_supercomputer.jpg">https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/IBM_Blue_Gene_P_supercomputer.jpg/600px-IBM_Blue_Gene_P_supercomputer.jpg</a></p>
</section>
<section id="basics-of-parallel-metrics">
<h2><span class="section-number">13.2. </span>Basics of parallel metrics<a class="headerlink" href="#basics-of-parallel-metrics" title="Link to this heading">#</a></h2>
<p>But, as usual, you should always measure. All programs have a serial
part that cannot be parallelized and a parallel part than can. Using
more processors/threads can reduce only the parallel, so a 100% serial
program cannot really take advantage of a parallel system. This is known
as Amdahls law,
<a class="reference external" href="https://en.wikipedia.org/wiki/Amdahl%27s_law?useskin=vector">https://en.wikipedia.org/wiki/Amdahl’s_law?useskin=vector</a></p>
<p><a class="reference external" href="https://upload.wikimedia.org/wikipedia/commons/e/ea/AmdahlsLaw.svg">https://upload.wikimedia.org/wikipedia/commons/e/ea/AmdahlsLaw.svg</a></p>
<p>At the end, the user must also gauge its application performance.
Blindly reserve of HPC resources represent a non efficient cluster use,
and higher costs. In this regard, parallel metrics are really crucial.
The next to figures show the speedup and the parallel efficiency. As you
can see, they are limited by the hardware (and algorithms)</p>
<ul class="simple">
<li><p>Speedup:
<img alt="../_images/speedup.png" class="centerimg50" src="../_images/speedup.png" /></p></li>
<li><p>Parallel efficiency:
<img alt="../_images/efficiency.png" class="centerimg50" src="../_images/efficiency.png" /></p></li>
</ul>
<p>Rooftop model:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Roofline_model?useskin=vector">https://en.wikipedia.org/wiki/Roofline_model?useskin=vector</a></p></li>
<li></li>
</ul>
</section>
<section id="practical-overview-of-a-cluster-resources-and-use">
<h2><span class="section-number">13.3. </span>Practical overview of a cluster resources and use<a class="headerlink" href="#practical-overview-of-a-cluster-resources-and-use" title="Link to this heading">#</a></h2>
<p>There are many aspects to take into account in the HPC field. If you are
a user, you should know abount the type of parallelization (shared
memory, disitributed memory, gpu programming), the type of hardware you
are using, the resource manager, the data storage and so on. The goal of
a system administrator is to make that easier, but that is not always
possible. Check the <code class="docutils literal notranslate"><span class="pre">12-12-hkhlr_quick_reference-goethe-hlr</span></code> (from
<a class="reference external" href="https://csc.uni-frankfurt.de/wiki/doku.php?id=public:start">https://csc.uni-frankfurt.de/wiki/doku.php?id=public:start</a>) for an
example of a typical cluster config and offerings.</p>
<p>These are examples from the Archer cluster at
<a class="reference external" href="https://www.archer2.ac.uk/">https://www.archer2.ac.uk/</a></p>
<p><img alt="../_images/Archer1.png" src="../_images/Archer1.png" /></p>
<img alt="../_images/Archer2.png" class="centerimg50" src="../_images/Archer2.png" />
<img alt="../_images/Archer3.png" class="centerimg50" src="../_images/Archer3.png" />
<p>In the following, we will see some basic examples for HPC, such us</p>
<ul class="simple">
<li><p>Shared memory: with openmp</p></li>
<li><p>Distributed memory: using mpi</p></li>
<li><p>Multiple processes: using gnu parallel</p></li>
<li><p>C++ threads</p></li>
<li><p>TODO C++ parallel algorithms</p></li>
</ul>
<p>Video: Introduction to shared and distributed memory: <a class="reference external" href="https://math-gpt.org/video/hls_4e3c1ffe-ee8e-49fb-a62d-a10615c0483d">https://math-gpt.org/video/hls_4e3c1ffe-ee8e-49fb-a62d-a10615c0483d</a></p>
<p>Video: Introduction to gpu programming with cuda: <a class="reference external" href="https://math-gpt.org/video/hls_a9482f1a-7013-423e-ae0e-d4fd83edf997">https://math-gpt.org/video/hls_a9482f1a-7013-423e-ae0e-d4fd83edf997</a></p>
</section>
<section id="openmp-shared-memory">
<h2><span class="section-number">13.4. </span>Openmp, shared memory<a class="headerlink" href="#openmp-shared-memory" title="Link to this heading">#</a></h2>
<p>In the share memory paradigm, threads (lighweight processes without their own context) share or can “see” the same memory:</p>
<p><a class="reference internal" href="https://hpc-tutorials.llnl.gov/openmp/images/uma.gif"><img alt="https://hpc-tutorials.llnl.gov/openmp/images/uma.gif" src="https://hpc-tutorials.llnl.gov/openmp/images/uma.gif" style="width: 30%;" /></a> <a class="reference internal" href="https://hpc-tutorials.llnl.gov/openmp/images/numa.gif"><img alt="https://hpc-tutorials.llnl.gov/openmp/images/numa.gif" src="https://hpc-tutorials.llnl.gov/openmp/images/numa.gif" style="width: 30%;" /></a></p>
<p>Here, a main process creates/destriys threads as needed
<a class="reference internal" href="https://hpc-tutorials.llnl.gov/openmp/images/fork_join.gif"><img alt="https://hpc-tutorials.llnl.gov/openmp/images/fork_join.gif" src="https://hpc-tutorials.llnl.gov/openmp/images/fork_join.gif" style="width: 80%;" /></a></p>
<p>The following code shows a very simple parallelization using openmp,
which allows tu share memory and run on several threads.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;omp.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;BEFORE</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="cp">#pragma omp parallel</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hola mundo</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;AFTER</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To activate multi-threading, compile it as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++<span class="w"> </span>-fopenmp<span class="w"> </span>codes/openmp.cpp
</pre></div>
</div>
<p>To run it, you can control the number of threads using the environment
variable <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++<span class="w"> </span>-fopenmp<span class="w"> </span>codes/openmp.cpp
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running with 2 threads&quot;</span>
<span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">2</span><span class="w"> </span>./a.out
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running with 4 threads&quot;</span>
<span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="m">4</span><span class="w"> </span>./a.out
</pre></div>
</div>
<section id="exercises">
<h3><span class="section-number">13.4.1. </span>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Modify the previous exercise to identify the thread which is
printing. Find a function to get the “thread id”.</p></li>
<li><p>Besides the thread id, print the number of threads and the hostname.
Print the number of threads outside the parallel region. Does that
make sense?</p></li>
</ol>
</section>
</section>
<section id="mpi-distributed-memory">
<h2><span class="section-number">13.5. </span>MPI, distributed memory<a class="headerlink" href="#mpi-distributed-memory" title="Link to this heading">#</a></h2>
<p>MPI, the Message Passing Interface, is a library API that allows process
to interchange data in a distributed memory context. It is more comple
that openmp, but also opens the door to a greater scale since we can use
many computers, increasing both our computational power and memory
capacity (if done correctly and efficiently). See: <a class="reference external" href="https://www.mpi-forum.org/docs/">https://www.mpi-forum.org/docs/</a></p>
<a class="reference internal image-reference" href="https://hpc-tutorials.llnl.gov/mpi/images/distributed_mem.gif"><img alt="https://hpc-tutorials.llnl.gov/mpi/images/distributed_mem.gif" class="align-center" src="https://hpc-tutorials.llnl.gov/mpi/images/distributed_mem.gif" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="https://developer-blogs.nvidia.com/wp-content/uploads/2013/03/LaunchMPI1.png"><img alt="https://developer-blogs.nvidia.com/wp-content/uploads/2013/03/LaunchMPI1.png" class="align-center" src="https://developer-blogs.nvidia.com/wp-content/uploads/2013/03/LaunchMPI1.png" style="width: 50%;" /></a>
<p>The following shows the basic structure of a MPI program. It creates
several <strong>processes</strong> that can communicate with each other, and can be
run in multiple machines (for an introduction, see:
<a class="reference external" href="https://mpitutorial.com/tutorials/mpi-introduction/">https://mpitutorial.com/tutorials/mpi-introduction/</a>)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Initialize the MPI environment</span>
<span class="w">    </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Get the number of processes</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">np</span><span class="p">;</span>
<span class="w">    </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">np</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Get the rank of the process</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<span class="w">    </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pid</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Get the name of the processor</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">processor_name</span><span class="p">[</span><span class="n">MPI_MAX_PROCESSOR_NAME</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">name_len</span><span class="p">;</span>
<span class="w">    </span><span class="n">MPI_Get_processor_name</span><span class="p">(</span><span class="n">processor_name</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">name_len</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Print off a hello world message</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello world from processor %s, rank %d out of %d processes</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">           </span><span class="n">processor_name</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">np</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Finalize the MPI environment.</span>
<span class="w">    </span><span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can compile it as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpic++<span class="w">  </span>mpi.cpp
</pre></div>
</div>
<p>(If you want to see all the flags, use <code class="docutils literal notranslate"><span class="pre">mpic++</span> <span class="pre">--showme</span></code>)</p>
<p>And now run it as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>./a.out
</pre></div>
</div>
<p>You can also specifiy different machines to run on, but you will need to
have configured passwordless access to those machines. Or better, use <code class="docutils literal notranslate"><span class="pre">slurm</span></code> .</p>
<section id="id1">
<h3><span class="section-number">13.5.1. </span>Exercises<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Run on two nodes the same process</p></li>
<li><p>Interchange some message between the two nodes: use MPI_Send and MPI_Recv.</p></li>
</ul>
</section>
</section>
<section id="parallelism-in-python">
<h2><span class="section-number">13.6. </span>Parallelism in python<a class="headerlink" href="#parallelism-in-python" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://realpython.com/intro-to-python-threading/">https://realpython.com/intro-to-python-threading/</a></p></li>
<li><p><a class="reference external" href="https://www.dask.org/">https://www.dask.org/</a></p></li>
<li><p><a class="github reference external" href="https://github.com/pybind/pybind11">pybind/pybind11</a></p></li>
<li><p><a class="reference external" href="https://www.phoronix.com/news/NumPy-2.3-Released">https://www.phoronix.com/news/NumPy-2.3-Released</a></p></li>
</ul>
<p>Also :</p>
<ul class="simple">
<li><p><a class="reference external" href="https://realpython.com/python312-subinterpreters/">https://realpython.com/python312-subinterpreters/</a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/whatsnew/3.12.html">https://docs.python.org/3/whatsnew/3.12.html</a></p></li>
</ul>
</section>
<section id="threads-from-c-11">
<h2><span class="section-number">13.7. </span>Threads from c++11<a class="headerlink" href="#threads-from-c-11" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">c++11</span></code> standard included, among many other usefull things, the use
a <strong>thread</strong>. A thread is a lightweight process that can be launched in
parallel with other threads from a parent process. In the following we
will see some very simple examples since at the end we will focus mainly
on OpenMP (where threads are the key and the memory is shared) and MPI
(where processes are the basic unit and memory is distributed).</p>
<p>The following example are based on</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/thread">https://en.cppreference.com/w/cpp/thread</a></p></li>
<li><p><a class="reference external" href="https://www.classes.cs.uchicago.edu/archive/2013/spring/12300-1/labs/lab6/">https://www.classes.cs.uchicago.edu/archive/2013/spring/12300-1/labs/lab6/</a></p></li>
</ul>
<p>The following example shows how to create a thread from a given process,
and its output:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">th1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">th2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="n">th1</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Outside thread&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">th2</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Inside thread &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">::</span><span class="n">id</span><span class="w"> </span><span class="n">this_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">get_id</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;This is thread_id: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">this_id</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Compile it as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++<span class="w"> </span>-std<span class="o">=</span>c++11<span class="w"> </span>thread-v1.cpp
</pre></div>
</div>
<p>The folowwing is an example of the output:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Inside</p></td>
<td><p>thread</p></td>
<td><p>Inside</p></td>
<td><p>thread</p></td>
<td><p>100200</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>This</p></td>
<td><p>is</p></td>
<td><p>thread<sub>id</sub>:</p></td>
<td><p>This</p></td>
<td><p>is</p></td>
<td><p>thread<sub>id</sub>:</p></td>
<td><p>0x700003c34000</p></td>
</tr>
<tr class="row-odd"><td><p>0x700003cb7000</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Outside</p></td>
<td><p>thread</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>Run it several times, you will obtain different outputs, many times they
will be mangled. Why? because the threads are running in parallel and
their output is not independent of each other, not synced.</p>
<p>To check that we are really running two threads, let’s increase the
computational effort inside function <code class="docutils literal notranslate"><span class="pre">func</span></code> and then, while the program
is running, use top or htop to check what is running on your computer.
Notice that the cpu use percentage is around <code class="docutils literal notranslate"><span class="pre">200%</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nsecs</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">secs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">th1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">secs</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">th2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="n">secs</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">th3</span><span class="p">(</span><span class="o">&amp;</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="n">secs</span><span class="p">);</span>
<span class="w">    </span><span class="n">th1</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Outside thread&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">th2</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="n">th3</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nsecs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Inside thread &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="n">nsecs</span><span class="p">));</span><span class="w"> </span><span class="c1">// make this sleep, does not consume a lot of resources</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ii</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100000000</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">ii</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">std</span><span class="o">::</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mf">3.4455</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">ii</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Getting out of thread &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following is an example of the output:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Inside</p></td>
<td><p>thread</p></td>
<td><p>Inside</p></td>
<td><p>thread</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p>200</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Getting</p></td>
<td><p>out</p></td>
<td><p>of</p></td>
<td><p>thread</p></td>
<td><p>9387820000.0</p></td>
</tr>
<tr class="row-odd"><td><p>Outside</p></td>
<td><p>thread</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Getting</p></td>
<td><p>out</p></td>
<td><p>of</p></td>
<td><p>thread</p></td>
<td><p>18849600000.0</p></td>
</tr>
</tbody>
</table>
</div>
<p>To synchronize threads, you can use a mutex. This is useful in case you
need to sort out the printing, or, more importantly, to syncrhonize a
writing operation on some common variable. The following is a simple
example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mutex&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="n">g_display_mutex</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">::</span><span class="n">id</span><span class="w"> </span><span class="n">this_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">get_id</span><span class="p">();</span>

<span class="w">    </span><span class="n">g_display_mutex</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;thread &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">this_id</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; sleeping...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">g_display_mutex</span><span class="p">.</span><span class="n">unlock</span><span class="p">();</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">t1</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="n">t2</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>

<span class="w">    </span><span class="n">t1</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="n">t2</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>thread</p></td>
<td><p>0x70000709a000</p></td>
<td><p>sleeping…</p></td>
</tr>
<tr class="row-odd"><td><p>thread</p></td>
<td><p>0x70000711d000</p></td>
<td><p>sleeping…</p></td>
</tr>
</tbody>
</table>
</div>
<p>Repeat several times. Although the thread id will change, the output
will not be mangled.</p>
<p>There is much more about threads, but since our focus will turn to
OpenMP, we will stop here. For more info check
<a class="reference external" href="https://en.cppreference.com/w/cpp/thread/thread">https://en.cppreference.com/w/cpp/thread/thread</a></p>
<section id="exercise">
<h3><span class="section-number">13.7.1. </span>Exercise<a class="headerlink" href="#exercise" title="Link to this heading">#</a></h3>
<p>Fix the following code, which has a race condition, using a mutex (ref:
<a class="reference external" href="https://www.classes.cs.uchicago.edu/archive/2013/spring/12300-1/labs/lab6/">https://www.classes.cs.uchicago.edu/archive/2013/spring/12300-1/labs/lab6/</a>)
:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ths</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ths</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">square</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ref</span><span class="p">(</span><span class="n">accum</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">th</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ths</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">th</span><span class="p">.</span><span class="n">join</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;accum = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">accum</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2870</span>
</pre></div>
</div>
<p>The correct answer is <code class="docutils literal notranslate"><span class="pre">2870</span></code>, but if you repeat the execution many times
you will find different results. For instance, repeating the execution
1000 times and checking for the unique answers one gets</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..1000<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>./a.out<span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2509</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2674</span>
<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2749</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2806</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2834</span>
<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2845</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2854</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2861</span>
<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2866</span>
<span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2869</span>
<span class="m">979</span><span class="w"> </span><span class="nv">accum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2870</span>
</pre></div>
</div>
<p>which shows that it not always yield 2870 .</p>
</section>
</section>
<section id="parallel-algorithms-in-c">
<h2><span class="section-number">13.8. </span>Parallel algorithms in c++<a class="headerlink" href="#parallel-algorithms-in-c" title="Link to this heading">#</a></h2>
<p>Since <code class="docutils literal notranslate"><span class="pre">c++17</span></code>, it is possible to execute some stl algorithms in parallel
(shared memory), without explictly using threads. See:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/algorithm/execution_policy_tag_t">https://en.cppreference.com/w/cpp/algorithm/execution_policy_tag_t</a></p></li>
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/algorithm">https://en.cppreference.com/w/cpp/algorithm</a></p></li>
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/experimental/parallelism">https://en.cppreference.com/w/cpp/experimental/parallelism</a></p></li>
</ul>
<p>This a simple example for performing a sum</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;numeric&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;execution&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100000000</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">myArray</span><span class="p">(</span><span class="n">ARRAY_SIZE</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">iota</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// fill array with 0, 1, 2, ..., ARRAY_SIZE-1</span>

<span class="w">    </span><span class="c1">// sequential execution</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">sum_seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Sequential sum: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sum_seq</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// parallel execution</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">sum_par</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">par</span><span class="p">,</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Parallel sum: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sum_par</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To compile, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++<span class="w"> </span>-std<span class="o">=</span>c++17<span class="w"> </span>par.cpp<span class="w"> </span>-ltbb
</pre></div>
</div>
<p>This is linking with an intel threads implementation.</p>
<p>You can of course measure how much time is spent on each part. To do so,
we will use chrono:</p>
<ul class="simple">
<li><p>Implementation 1:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;numeric&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;execution&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100000000</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">myArray</span><span class="p">(</span><span class="n">ARRAY_SIZE</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">iota</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// fill array with 0, 1, 2, ..., ARRAY_SIZE-1</span>

<span class="w">    </span><span class="c1">// sequential execution</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">sum_seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">end_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">seq_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Sequential sum: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sum_seq</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;( took : &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">seq_duration</span><span class="p">.</span><span class="n">count</span><span class="p">()</span><span class="o">/</span><span class="mf">1000.0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; s)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// parallel execution</span>
<span class="w">    </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">sum_par</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">par</span><span class="p">,</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">    </span><span class="n">end_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="n">seq_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">end_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Parallel sum: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sum_par</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;( took : &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">seq_duration</span><span class="p">.</span><span class="n">count</span><span class="p">()</span><span class="o">/</span><span class="mf">1000.0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; s)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Implementation 2:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;numeric&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;execution&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Func</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">time_function</span><span class="p">(</span><span class="n">Func</span><span class="w"> </span><span class="n">func</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ARRAY_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100000000</span><span class="p">;</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">myArray</span><span class="p">(</span><span class="n">ARRAY_SIZE</span><span class="p">);</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">iota</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// fill array with 0, 1, 2, ..., ARRAY_SIZE-1</span>

<span class="w">  </span><span class="c1">// sequential execution</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">serial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="n">myArray</span><span class="p">](){</span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">accumulate</span><span class="p">(</span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);};</span>
<span class="w">  </span><span class="n">time_function</span><span class="p">(</span><span class="n">serial</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// parallel execution</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">parallel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="n">myArray</span><span class="p">](){</span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">reduce</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">execution</span><span class="o">::</span><span class="n">par</span><span class="p">,</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">myArray</span><span class="p">.</span><span class="n">end</span><span class="p">());};</span>
<span class="w">  </span><span class="n">time_function</span><span class="p">(</span><span class="n">parallel</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Func</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">time_function</span><span class="p">(</span><span class="n">Func</span><span class="w"> </span><span class="n">func</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">  </span><span class="n">func</span><span class="p">();</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">duration_ms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Elapsed time: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">duration_ms</span><span class="o">/</span><span class="mf">1000.0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;  s&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The standard does not specify a way to control the nuber tof threads. If
you want to do so, and you are using Intel Threads Block implementation,
you can add gthe following header</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;tbb/task_scheduler_init.h&gt;</span>
</pre></div>
</div>
<p>and then , at some point, specify the thread total (in this case, 4)</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">tbb</span><span class="o">::</span><span class="n">task_scheduler_init</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
<p>To learn more about the parallel algs, check</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.cppreference.com/w/cpp/algorithm">https://en.cppreference.com/w/cpp/algorithm</a></p></li>
</ul>
</section>
<section id="gpu-programming">
<h2><span class="section-number">13.9. </span>Gpu Programming<a class="headerlink" href="#gpu-programming" title="Link to this heading">#</a></h2>
<section id="cuda-nvidia">
<h3><span class="section-number">13.9.1. </span>CUDA: Nvidia<a class="headerlink" href="#cuda-nvidia" title="Link to this heading">#</a></h3>
<a class="reference internal image-reference" href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/_images/gpu-devotes-more-transistors-to-data-processing.png"><img alt="https://docs.nvidia.com/cuda/cuda-c-programming-guide/_images/gpu-devotes-more-transistors-to-data-processing.png" class="align-center" src="https://docs.nvidia.com/cuda/cuda-c-programming-guide/_images/gpu-devotes-more-transistors-to-data-processing.png" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe1c9bc3b-8d6f-4d6a-b199-d52a7c0500db_1400x900.png"><img alt="https://www.generativevalue.com/p/nvidia-past-present-and-future" class="align-center" src="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe1c9bc3b-8d6f-4d6a-b199-d52a7c0500db_1400x900.png" style="width: 50%;" /></a>
</section>
<section id="amd-rocm">
<h3><span class="section-number">13.9.2. </span>AMD: Rocm<a class="headerlink" href="#amd-rocm" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://rocm.docs.amd.com/projects/HIP/en/latest/understand/programming_model.html">https://rocm.docs.amd.com/projects/HIP/en/latest/understand/programming_model.html</a></p>
<a class="reference internal image-reference" href="https://cgmb-rocm-docs.readthedocs.io/en/latest/_images/ROCm_Stack.png"><img alt="https://cgmb-rocm-docs.readthedocs.io/en/latest/_images/ROCm_Stack.png" class="align-center" src="https://cgmb-rocm-docs.readthedocs.io/en/latest/_images/ROCm_Stack.png" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed59b592-486f-4579-9187-1ae7d7921f3c_1597x897.jpeg"><img alt="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed59b592-486f-4579-9187-1ae7d7921f3c_1597x897.jpeg" class="align-center" src="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fed59b592-486f-4579-9187-1ae7d7921f3c_1597x897.jpeg" style="width: 50%;" /></a>
</section>
<section id="others">
<h3><span class="section-number">13.9.3. </span>Others<a class="headerlink" href="#others" title="Link to this heading">#</a></h3>
<p>OpenACC, OpenMP, …</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./12-IntroHPC"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../11-matrix-performance/11-matrix-performance.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">12. </span>Computational linear algebra: Performance exploration</p>
      </div>
    </a>
    <a class="right-next"
       href="../12-Slurm/Slurm.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">14. </span>HPC resource manager: Slurm</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">13.1. Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basics-of-parallel-metrics">13.2. Basics of parallel metrics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#practical-overview-of-a-cluster-resources-and-use">13.3. Practical overview of a cluster resources and use</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openmp-shared-memory">13.4. Openmp, shared memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">13.4.1. Exercises</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mpi-distributed-memory">13.5. MPI, distributed memory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">13.5.1. Exercises</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-in-python">13.6. Parallelism in python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#threads-from-c-11">13.7. Threads from c++11</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise">13.7.1. Exercise</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-algorithms-in-c">13.8. Parallel algorithms in c++</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gpu-programming">13.9. Gpu Programming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cuda-nvidia">13.9.1. CUDA: Nvidia</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#amd-rocm">13.9.2. AMD: Rocm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#others">13.9.3. Others</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By William Oquendo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>